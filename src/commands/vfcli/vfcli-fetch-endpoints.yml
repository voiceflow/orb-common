description: Uses vfcli fetch the specified component URLs from an environment and stores them in env vars

parameters:
  env-name:
    type: string
    description: Name of the environment to create
  cluster:
    type: string
    description: Name of the cluster to create the environment on
    default: "cm4-vf-dev-br-2-0-p0"
  components:
    type: string
    description: Space-separated list of components to fetch
  env-var-suffix:
    type: string
    description: Suffix to use for the environment variables (e.g. "CREATOR_APP_SUFFIX")
    default: "_URL"
steps:
  - run:
      name: Fetch endpoints for << parameters.components >>
      environment:
        COMPONENTS: << parameters.components >>
        CLUSTER: << parameters.cluster >>
        ENV_NAME: << parameters.env-name >>
      command: << include(scripts/vfcli/fetch-endpoints.sh) >>
