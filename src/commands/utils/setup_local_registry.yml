description: Setup a local NPM registry
parameters:
  verdaccio_config:
    description: location of verdaccio configuration file
    type: string
steps:
  - run:
      name: Setup local proxy registry
      background: true
      environment:
        CONFIG: << parameters.verdaccio_config >>
      command: <<include(scripts/utils/setup-local-registry.sh)>>
  - run_command_with_retry:
      step_name: Download Docker image
      command: docker pull 168387678261.dkr.ecr.us-east-1.amazonaws.com/ci-node-build-image:v1
