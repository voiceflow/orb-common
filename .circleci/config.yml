version: 2.1
orbs:
  orb-tools: circleci/orb-tools@2.0.0

executors:
  node-executor:
    docker:
      - image: circleci/node:12

jobs:
  validate-orb:
    executor: node-executor
    steps:
      - orb-tools/validate:
          orb-path: orb.yml

workflows:
  validate-orb:
    jobs:
      - validate-orb
      

  publish-orb:
    jobs:
      - orb-tools/increment:
          orb-path: orb.yml
          orb-ref: voiceflow/common
          publish-token-variable: ${CIRCLE_TOKEN}
          segment: patch
          validate: true
          filters:
              branches:
                only: master